# 2025年TI杯大学生电子设计竞赛K题 - 自动避障小车

本项目是为2025年全国大学生电子设计竞赛K题（自动避障小车）所准备的完整解决方案。项目采用德州仪器（TI）的 **MSPM0G3507** 作为主控MCU，并结合 **Sipeed MaixCam** 视觉模块，实现小车的自主导航与障碍物规避功能。

## 项目概述

本设计旨在实现一个能够自主识别、定位并规避赛道上圆柱体障碍物的智能小车。小车通过摄像头获取环境信息，由主控芯片处理传感器数据和运动控制算法，最终完成指定的赛道任务。

## 硬件方案

- **主控制器**: 采用TI **MSPM0G3507** MCU，负责核心的运动控制、传感器数据处理以及与外设的通信。
- **视觉模块**: 使用 Sipeed MaixCam 摄像头，运行独立的Python程序（`cylinder_detector.py`），专门用于检测赛道上的圆柱体障碍物，并通过串口（UART）将目标位置信息发送给主控。
- **传感器**:
    - **IMU**: 板载惯性测量单元（如LSM6DSV16X或MPU6050），用于姿态解算和航向角控制。
    - **ToF传感器**: VL53L1X激光测距传感器，用于精确测量与障碍物的距离。
    - **编码器**: 电机编码器，用于获取车轮速度和里程信息，实现速度闭环控制。
    - **灰度传感器**: 用于循迹和边缘检测。
- **通信**:
    - **UART**: 用于主控MCU与MaixCam和蓝牙模块之间的通信。
    - **蓝牙**: 用于无线调试和数据显示。

## 软件架构

### 1. MSPM0G3507 (嵌入式C)

基于Keil开发环境，代码位于 `2025K-Code/mspm0g3507` 目录下。

- **应用层 (`custom_src/application`)**:
    - **核心控制 (`control`)**: 实现小车的PID控制、状态机管理、调试接口等。
    - **任务逻辑 (`task_2025k`)**: 针对2025年K题的特定任务逻辑，如解析摄像头数据、决策规划等。
- **驱动层 (`custom_src/drivers`)**: 针对各外设（传感器、通信模块、电机等）的驱动程序。
- **硬件抽象层 (`custom_src/hal`)**: 对MCU片上资源（ADC, I2C, SPI, UART）的封装，提供统一接口。
- **TI驱动库 (`source/ti/driverlib`)**: TI官方提供的底层驱动库。

### 2. MaixCam (Python)

代码位于 `2025K-Code/maixcam_project` 目录下。

- `main.py`: 程序入口，初始化摄像头和串口。
- `cylinder_detector.py`: 核心算法，使用图像处理技术识别视野中的圆柱体。
- `uart.py`: 封装了与主控MCU的串口通信协议。

## 目录结构

```
.
├── 2025K-Code/               # 所有源代码
│   ├── maixcam_project/      # MaixCam视觉模块的Python代码
│   └── mspm0g3507/           # MSPM0G3507主控的嵌入式C代码 (Keil工程)
├── 2025K-DesignReport/       # 设计报告 (LaTeX源文件和PDF)
├── 2025K-HardwareDesign/     # 硬件设计文件 (PCB工程)
├── 2025K-Resources/          # 其他参考资料
├── K题_自动避障小车.pdf        # 2025年K题题目要求
└── README.md                 # 本文档
```

## 如何使用

1.  **硬件**: 参考 `2025K-HardwareDesign` 中的PCB文件制作或搭建硬件电路。
2.  **嵌入式代码**: 使用Keil MDK打开 `2025K-Code/mspm0g3507/project/Keil/EmbedBolt316.uvprojx` 工程，编译并烧录到MSPM0G3507开发板。
3.  **视觉代码**: 将 `2025K-Code/maixcam_project` 目录下的文件烧录到MaixCam中。
4.  **运行**: 接通电源，小车将自动开始执行任务。
